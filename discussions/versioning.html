<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="next" title="部署 Python 应用程序" href="deploying-python-applications.html" /><link rel="prev" title="讨论" href="index.html" />

    <link rel="shortcut icon" href="../_static/py.png"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>版本控制 - Python Packaging User Guide</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Python Packaging User Guide</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Python Packaging User Guide</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow.html">打包流程</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/installing-packages.html">安装软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/managing-dependencies.html">管理依赖项</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/packaging-projects.html">打包Python项目</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">指南</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/section-install.html">安装</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 安装</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/installing-using-pip-and-virtual-environments.html">使用 pip 和 venv 在虚拟环境中安装软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/installing-using-virtualenv.html">使用虚拟环境安装包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/installing-stand-alone-command-line-tools.html">安装独立的命令行工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/installing-using-linux-tools.html">使用 Linux 包管理器安装 pip/setuptools/wheel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/installing-scientific-packages.html">安装科学软件包</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/section-build-and-publish.html">构建和发布</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 构建和发布</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/writing-pyproject-toml.html">编写你的 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/distributing-packages-using-setuptools.html">打包和分发项目</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/dropping-older-python-versions.html">放弃对旧版 Python 的支持</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/packaging-binary-extensions.html">打包二进制扩展</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/packaging-namespace-packages.html">打包命名空间包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/creating-command-line-tools.html">创建和打包命令行工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/creating-and-discovering-plugins.html">创建和发现插件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/using-testpypi.html">使用 TestPyPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/making-a-pypi-friendly-readme.html">制作适合 PyPI 的 README</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/publishing-package-distribution-releases-using-github-actions-ci-cd-workflows.html">使用 GitHub Actions CI/CD 工作流发布软件包分发版本</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/modernize-setup-py-project.html">如何使基于 <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> 的项目现代化？</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/section-hosting.html">托管</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 托管</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/index-mirrors-and-caches.html">包索引镜像和缓存</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/hosting-your-own-index.html">托管您自己的简单存储库</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/tool-recommendations.html">工具推荐</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/analyzing-pypi-package-downloads.html">分析 PyPI 软件包下载</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">讨论</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 讨论</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">版本控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploying-python-applications.html">部署 Python 应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="pip-vs-easy-install.html">pip vs easy_install</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-requires-vs-requirements.html">install_requires 与需求文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="distribution-package-vs-import-package.html">分发包与导入包</a></li>
<li class="toctree-l2"><a class="reference internal" href="package-formats.html">软件包格式</a></li>
<li class="toctree-l2"><a class="reference internal" href="src-layout-vs-flat-layout.html">src 布局与平面布局</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup-py-deprecated.html"><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> 已被弃用吗？</a></li>
<li class="toctree-l2"><a class="reference internal" href="single-source-version.html">单一来源项目版本</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../specifications/index.html">PyPA 规范</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of PyPA 规范</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../specifications/section-distribution-metadata.html">包分发元数据</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 包分发元数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../specifications/name-normalization.html">名称和规范化</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/core-metadata.html">核心元数据规范</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/version-specifiers.html">版本标识符</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/dependency-specifiers.html">依赖说明符</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/pyproject-toml.html"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 规范</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/inline-script-metadata.html">内联脚本元数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/platform-compatibility-tags.html">平台兼容性标签</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/well-known-project-urls.html">元数据中的知名项目 URL</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../specifications/section-installation-metadata.html">包安装元数据</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 包安装元数据</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../specifications/recording-installed-packages.html">记录已安装的项目</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/entry-points.html">入口点规范</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/direct-url.html">记录已安装发行版的直接 URL 来源</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/direct-url-data-structure.html">直接 URL 数据结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/virtual-environments.html">Python 虚拟环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/externally-managed-environments.html">外部管理环境</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../specifications/section-distribution-formats.html">包分发文件格式</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 包分发文件格式</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../specifications/source-distribution-format.html">源分发格式</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/binary-distribution-format.html">二进制分发格式</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../specifications/section-package-indices.html">包索引接口</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 包索引接口</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../specifications/pypirc.html"><code class="file docutils literal notranslate"><span class="pre">.pypirc</span></code> 文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../specifications/simple-repository-api.html">Simple 仓库 API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../key_projects.html">项目摘要</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">如何获取支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">为本指南做出贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">新闻</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/discussions/versioning.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="choosing-a-versioning-scheme">
<span id="versioning"></span><span id="id1"></span><h1>版本控制<a class="headerlink" href="#choosing-a-versioning-scheme" title="Link to this heading">¶</a></h1>
<p><strong>Versioning</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>本讨论涵盖了 Python 包版本控制的所有方面。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>This discussion covers all aspects of versioning Python packages.</p>
</div>
</div>
<section id="id2">
<h2>有效版本号<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p><strong>Valid version numbers</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p>不同的 Python 项目可能会根据特定项目的需求使用不同的版本控制方案，但为了与像 <a class="reference internal" href="../key_projects.html#pip"><span class="std std-ref">pip</span></a> 这样的工具兼容，它们都需要遵循一个灵活的版本标识符格式，其权威参考为 <a class="reference internal" href="../specifications/version-specifiers.html#version-specifiers"><span class="std std-ref">版本规范说明</span></a> 。以下是一些版本号的示例 <a class="footnote-reference brackets" href="#version-examples1" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> :</p>
<ul class="simple">
<li><p>一个简单的版本（正式发布版）：<code class="docutils literal notranslate"><span class="pre">1.2.0</span></code></p></li>
<li><p>一个开发版本：<code class="docutils literal notranslate"><span class="pre">1.2.0.dev1</span></code></p></li>
<li><p>一个 alpha 版本：<code class="docutils literal notranslate"><span class="pre">1.2.0a1</span></code></p></li>
<li><p>一个 beta 版本：<code class="docutils literal notranslate"><span class="pre">1.2.0b1</span></code></p></li>
<li><p>一个发布候选版本：<code class="docutils literal notranslate"><span class="pre">1.2.0rc1</span></code></p></li>
<li><p>一个后发布版本：<code class="docutils literal notranslate"><span class="pre">1.2.0.post1</span></code></p></li>
<li><p>一个 alpha 版本的后发布版本（可能，但不推荐）：<code class="docutils literal notranslate"><span class="pre">1.2.0a1.post1</span></code></p></li>
<li><p>只有两个组件的简单版本：<code class="docutils literal notranslate"><span class="pre">23.12</span></code></p></li>
<li><p>只有一个组件的简单版本：<code class="docutils literal notranslate"><span class="pre">42</span></code></p></li>
<li><p>带有纪元（epoch）的版本：<code class="docutils literal notranslate"><span class="pre">1!1.0</span></code></p></li>
</ul>
<p>项目可以使用预发布周期，在最终发布之前支持用户进行测试。顺序为：alpha 版本、beta 版本、发布候选版本、最终发布。Pip 和其他现代 Python 包管理工具在决定安装哪个版本的依赖时默认忽略预发布版本，除非明确请求（例如，使用 <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pkg==1.1a3</span></code> 或 <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--pre</span> <span class="pre">pkg</span></code>）。</p>
<p>开发版本的目的是支持在开发周期初期发布的版本，例如，夜间构建或来自 Linux 发行版的最新源代码构建。</p>
<p>后发布版本用于解决正式发布中的一些轻微错误，这些错误不会影响分发的软件，例如，修正发布说明中的错误。后发布版本不应用于修复 bug；这些应通过新的正式版本来解决（例如，在使用语义版本控制时递增第三个组件）。</p>
<p>最后，纪元（epoch）是一个很少使用的功能，用于在更改版本控制方案时修正排序顺序。例如，如果一个项目使用日历版本控制，版本号为 23.12，并且切换到语义版本控制，版本号为 1.0，则比较 1.0 和 23.12 时可能会出现错误的排序。为了解决这个问题，新的版本号应该有一个显式的纪元，例如 &quot;1!1.0&quot;，以便被视为比旧版本号更新。</p>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p>Different Python projects may use different versioning schemes based on the
needs of that particular project, but in order to be compatible with tools like
<a class="reference internal" href="../key_projects.html#pip"><span class="std std-ref">pip</span></a>, all of them are required to comply with a flexible format for
version identifiers, for which the authoritative reference is the
<a class="reference internal" href="../specifications/version-specifiers.html#version-specifiers"><span class="std std-ref">specification of version specifiers</span></a>. Here are some
examples of version numbers <a class="footnote-reference brackets" href="#version-examples2" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>:</p>
<ul class="simple">
<li><p>A simple version (final release): <code class="docutils literal notranslate"><span class="pre">1.2.0</span></code></p></li>
<li><p>A development release: <code class="docutils literal notranslate"><span class="pre">1.2.0.dev1</span></code></p></li>
<li><p>An alpha release: <code class="docutils literal notranslate"><span class="pre">1.2.0a1</span></code></p></li>
<li><p>A beta release: <code class="docutils literal notranslate"><span class="pre">1.2.0b1</span></code></p></li>
<li><p>A release candidate: <code class="docutils literal notranslate"><span class="pre">1.2.0rc1</span></code></p></li>
<li><p>A post-release: <code class="docutils literal notranslate"><span class="pre">1.2.0.post1</span></code></p></li>
<li><p>A post-release of an alpha release (possible, but discouraged): <code class="docutils literal notranslate"><span class="pre">1.2.0a1.post1</span></code></p></li>
<li><p>A simple version with only two components: <code class="docutils literal notranslate"><span class="pre">23.12</span></code></p></li>
<li><p>A simple version with just one component: <code class="docutils literal notranslate"><span class="pre">42</span></code></p></li>
<li><p>A version with an epoch: <code class="docutils literal notranslate"><span class="pre">1!1.0</span></code></p></li>
</ul>
<p>Projects can use a cycle of pre-releases to support testing by their users
before a final release. In order, the steps are: alpha releases, beta releases,
release candidates, final release. Pip and other modern Python package
installers ignore pre-releases by default when deciding which versions of
dependencies to install, unless explicitly requested (e.g., with
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pkg==1.1a3</span></code> or <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--pre</span> <span class="pre">pkg</span></code>).</p>
<p>The purpose of development releases is to support releases made early during a
development cycle, for example, a nightly build, or a build from the latest
source in a Linux distribution.</p>
<p>Post-releases are used to address minor errors in a final release that do not
affect the distributed software, such as correcting an error in the release
notes. They should not be used for bug fixes; these should be done with a new
final release (e.g., incrementing the third component when using semantic
versioning).</p>
<p>Finally, epochs, a rarely used feature, serve to fix the sorting order when
changing the versioning scheme. For example, if a project is using calendar
versioning, with versions like 23.12, and switches to semantic versioning, with
versions like 1.0, the comparison between 1.0 and 23.12 will go the wrong way.
To correct this, the new version numbers should have an explicit epoch, as in
&quot;1!1.0&quot;, in order to be treated as more recent than the old version numbers.</p>
</div>
</div>
</section>
<section id="id5">
<h2>语义版本控制与日历版本控制<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p><strong>Semantic versioning vs. calendar versioning</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>版本控制方案是对版本号各个部分进行解释的规范化方式，并决定在发布新版本时应该选择哪个版本号。Python 包常用的两种版本控制方案是语义版本控制和日历版本控制。</p>
<div class="admonition caution">
<p class="admonition-title">小心</p>
<p>选择哪个版本号由项目的维护者决定。这实际上意味着版本号的提升反映了维护者的观点。这个观点可能与最终用户对该版本控制方案的期望有所不同。</p>
<p>在选择下一个版本号时，有已知的例外情况。维护者可能会故意打破最后一个版本段仅包含向后兼容性更改的假设。一个这样的例外情况是当需要解决安全漏洞时。安全发布通常以修补版本发布，但不可避免地会包含破坏性更改。</p>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>A versioning scheme is a formalized way to interpret the segments of a version
number, and to decide which should be the next version number for a new release
of a package. Two versioning schemes are commonly used for Python packages,
semantic versioning and calendar versioning.</p>
<div class="admonition caution">
<p class="admonition-title">小心</p>
<p>The decision which version number to choose is up to a
project's maintainer. This effectively means that version
bumps reflect the maintainer's view. That view may differ
from the end-users' perception of what said formalized
versioning scheme promises them.</p>
<p>There are known exceptions for selecting the next version
number. The maintainers may consciously choose to break the
assumption that the last version segment only contains
backwards-compatible changes.
One such case is when security vulnerability needs to be
addressed. Security releases often come in patch versions
but contain breaking changes inevitably.</p>
</div>
</div>
</div>
<section id="id6">
<h3>语义版本控制<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p><strong>Semantic versioning</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p><em>语义版本控制</em> （或称 SemVer）的理念是使用三部分版本号，<em>major.minor.patch</em>，其中项目作者根据以下规则递增：</p>
<ul class="simple">
<li><p><em>major</em>：当他们做出不兼容的 API 更改时，</p></li>
<li><p><em>minor</em>：当他们以向后兼容的方式增加功能时，</p></li>
<li><p><em>patch</em>：当他们进行向后兼容的错误修复时。</p></li>
</ul>
<p>大多数 Python 项目使用类似于语义版本控制的方案。然而，大多数项目，尤其是大型项目，并不严格遵循语义版本控制，因为许多更改在技术上是破坏性的，但只影响少数用户。这些项目通常在不兼容性较大时递增主版本号，或者用于标志项目的重大变更，而不是为了任何微小的不兼容性 <a class="footnote-reference brackets" href="#semver-strictness1" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> 。相反，主版本号的递增有时用于表示显著的但向后兼容的新特性。</p>
<p>对于那些严格遵循语义版本控制的项目，这种方式允许用户使用 <a class="reference internal" href="../specifications/version-specifiers.html#version-specifiers-compatible-release"><span class="std std-ref">兼容的发布版本说明符</span></a>，通过 <code class="docutils literal notranslate"><span class="pre">~=</span></code> 操作符。例如， <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">~=</span> <span class="pre">X.Y</span></code> 大致等同于 <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">&gt;=</span> <span class="pre">X.Y,</span> <span class="pre">==</span> <span class="pre">X.*</span></code>，即它要求至少是 X.Y 版本，并允许任何后续版本，只要 X 保持不变，Y 增大。类似地，<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">~=</span> <span class="pre">X.Y.Z</span></code> 大致等同于 <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">&gt;=</span> <span class="pre">X.Y.Z,</span> <span class="pre">==</span> <span class="pre">X.Y.*</span></code>，即要求至少是 X.Y.Z 版本，并允许同样的 X 和 Y 版本，但 Z 可以更大。</p>
<p>采用语义版本控制的 Python 项目应遵循 <a class="reference external" href="https://semver.org">Semantic Versioning 2.0.0 规范</a> 的第 1-8 条。</p>
<p>流行的 <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html" title="（在 Sphinx v8.2.0）"><span class="xref std std-doc">Sphinx</span></a> 文档生成器是一个使用严格语义版本控制的示例（<a class="reference external" href="https://www.sphinx-doc.org/en/master/internals/release-process.html" title="（在 Sphinx v8.2.0）"><span class="xref std std-doc">Sphinx 版本管理政策</span></a>）。著名的 <a class="reference external" href="https://numpy.org/doc/stable/index.html" title="（在 NumPy v2.1）"><span class="xref std std-doc">NumPy</span></a> 科学计算包明确使用“宽松”语义版本控制，其中递增次版本号的发布可能包含向后不兼容的 API 更改（<a class="reference external" href="https://numpy.org/doc/stable/dev/depending_on_numpy.html" title="（在 NumPy v2.1）"><span class="xref std std-doc">NumPy 版本管理政策</span></a>）。</p>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>The idea of <em>semantic versioning</em> (or SemVer) is to use 3-part version numbers,
<em>major.minor.patch</em>, where the project author increments:</p>
<ul class="simple">
<li><p><em>major</em> when they make incompatible API changes,</p></li>
<li><p><em>minor</em> when they add functionality in a backwards-compatible manner, and</p></li>
<li><p><em>patch</em>, when they make backwards-compatible bug fixes.</p></li>
</ul>
<p>A majority of Python projects use a scheme that resembles semantic
versioning. However, most projects, especially larger ones, do not strictly
adhere to semantic versioning, since many changes are technically breaking
changes but affect only a small fraction of users. Such projects tend to
increment the major number when the incompatibility is high, or to signal a
shift in the project, rather than for any tiny incompatibility
<a class="footnote-reference brackets" href="#semver-strictness2" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. Conversely, a bump of the major version number
is sometimes used to signal significant but backwards-compatible new
features.</p>
<p>For those projects that do use strict semantic versioning, this approach allows
users to make use of <a class="reference internal" href="../specifications/version-specifiers.html#version-specifiers-compatible-release"><span class="std std-ref">compatible release version specifiers</span></a>, with the <code class="docutils literal notranslate"><span class="pre">~=</span></code> operator.  For
example, <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">~=</span> <span class="pre">X.Y</span></code> is roughly equivalent to <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">&gt;=</span> <span class="pre">X.Y,</span> <span class="pre">==</span> <span class="pre">X.*</span></code>, i.e.,
it requires at least release X.Y, and allows any later release with greater Y as
long as X is the same. Likewise, <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">~=</span> <span class="pre">X.Y.Z</span></code> is roughly equivalent to
<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">&gt;=</span> <span class="pre">X.Y.Z,</span> <span class="pre">==</span> <span class="pre">X.Y.*</span></code>, i.e., it requires at least X.Y.Z and allows a later
release with same X and Y but higher Z.</p>
<p>Python projects adopting semantic versioning should abide by clauses 1-8 of the
<a class="reference external" href="https://semver.org">Semantic Versioning 2.0.0 specification</a>.</p>
<p>The popular <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html" title="（在 Sphinx v8.2.0）"><span class="xref std std-doc">Sphinx</span></a> documentation generator is an example
project that uses strict semantic versioning (<a class="reference external" href="https://www.sphinx-doc.org/en/master/internals/release-process.html" title="（在 Sphinx v8.2.0）"><span class="xref std std-doc">Sphinx versioning policy</span></a>). The famous <a class="reference external" href="https://numpy.org/doc/stable/index.html" title="（在 NumPy v2.1）"><span class="xref std std-doc">NumPy</span></a>
scientific computing package explicitly uses &quot;loose&quot; semantic versioning, where
releases incrementing the minor version can contain backwards-incompatible API
changes (<a class="reference external" href="https://numpy.org/doc/stable/dev/depending_on_numpy.html" title="（在 NumPy v2.1）"><span class="xref std std-doc">NumPy versioning policy</span></a>).</p>
</div>
</div>
</section>
<section id="id9">
<h3>日历版本控制<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p><strong>Calendar versioning</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>语义版本控制并不适合所有项目，尤其是那些有规律的基于时间的发布周期，并且具有提供多次发布前警告的弃用过程的项目。</p>
<p>基于日期的版本控制，或称为 <a class="reference external" href="https://calver.org/overview_zhcn.html">日历版本控制</a> （CalVer），的一个关键优势是，只需版本号即可直观地了解某个特定发布的基本功能集有多旧。</p>
<p>日历版本号通常采用 <em>年.月</em> 的形式（例如，23.12 表示 2023 年 12 月）。</p>
<p>标准的 Python 包安装器 <a class="reference external" href="https://pip.pypa.io/en/latest/" title="（在 pip v25.0）"><span class="xref std std-doc">Pip</span></a> 就采用了日历版本控制。</p>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>Semantic versioning is not a suitable choice for all projects, such as those
with a regular time based release cadence and a deprecation process that
provides warnings for a number of releases prior to removal of a feature.</p>
<p>A key advantage of date-based versioning, or <a class="reference external" href="https://calver.org/overview_zhcn.html">calendar versioning</a>
(CalVer), is that it is straightforward to tell how old the base feature set of
a particular release is given just the version number.</p>
<p>Calendar version numbers typically take the form <em>year.month</em> (for example,
23.12 for December 2023).</p>
<p><a class="reference external" href="https://pip.pypa.io/en/latest/" title="（在 pip v25.0）"><span class="xref std std-doc">Pip</span></a>, the standard Python package installer, uses calendar
versioning.</p>
</div>
</div>
</section>
<section id="id10">
<h3>其他方案<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<p><strong>Other schemes</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<p>顺序版本控制指的是最简单的版本控制方案，它由一个单一的数字组成，每次发布时递增。虽然顺序版本控制对开发者来说非常容易管理，但对最终用户来说却是最难追踪的，因为顺序版本号几乎不提供关于 API 向后兼容性的信息。</p>
<p>上述版本控制方案的组合是可能的。例如，一个项目可能会将基于日期的版本控制与顺序版本控制结合起来，创建一种 <em>年.顺序</em> 的版本号方案，这种方案可以直观地传达发布的大致年龄，但不会在该年度内承诺特定的发布周期。</p>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<p>Serial versioning refers to the simplest possible versioning scheme, which
consists of a single number incremented every release. While serial versioning
is very easy to manage as a developer, it is the hardest to track as an end
user, as serial version numbers convey little or no information regarding API
backwards compatibility.</p>
<p>Combinations of the above schemes are possible. For example, a project may
combine date based versioning with serial versioning to create a <em>year.serial</em>
numbering scheme that readily conveys the approximate age of a release, but
doesn't otherwise commit to a particular release cadence within the year.</p>
</div>
</div>
</section>
</section>
<section id="id11">
<h2>本地版本标识符<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h2>
<p><strong>Local version identifiers</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>公共版本标识符旨在支持通过 <span class="xref std std-term">PyPI</span> 进行分发。Python 打包工具还支持 <a class="reference internal" href="../specifications/version-specifiers.html#local-version-identifiers"><span class="std std-ref">本地版本标识符</span></a> 的概念，可以用来标识不打算发布的本地开发构建，或者由重新分发者维护的修改版发布。</p>
<p>本地版本标识符的形式是一个公共版本标识符，后跟 &quot;+&quot; 和一个本地版本标签。例如，应用了 Fedora 特定补丁的包可以具有版本 &quot;1.2.1+fedora.4&quot;。另一个例子是由 <a class="reference external" href="https://setuptools-scm.readthedocs.io">setuptools-scm</a> 计算的版本，setuptools-scm 是一个读取 Git 数据中版本的 setuptools 插件。在一个 Git 仓库中，如果自上次发布以来有提交，setuptools-scm 会生成类似 &quot;0.5.dev1+gd00980f&quot; 的版本；如果仓库中有未跟踪的更改，则生成类似 &quot;0.5.dev1+gd00980f.d20231217&quot; 的版本。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>Public version identifiers are designed to support distribution via <a class="reference internal" href="../glossary.html#term-Python-Package-Index-PyPI"><span class="xref std std-term">PyPI</span></a>. Python packaging tools also support the notion
of a <a class="reference internal" href="../specifications/version-specifiers.html#local-version-identifiers"><span class="std std-ref">local version identifier</span></a>, which can be
used to identify local development builds not intended for publication, or
modified variants of a release maintained by a redistributor.</p>
<p>A local version identifier takes the form of a public version identifier,
followed by &quot;+&quot; and a local version label. For example, a package with
Fedora-specific patches applied could have the version &quot;1.2.1+fedora.4&quot;.
Another example is versions computed by <a class="reference external" href="https://setuptools-scm.readthedocs.io">setuptools-scm</a>, a setuptools plugin
that reads the version from Git data. In a Git repository with some commits
since the latest release, setuptools-scm generates a version like
&quot;0.5.dev1+gd00980f&quot;, or if the repository has untracked changes, like
&quot;0.5.dev1+gd00980f.d20231217&quot;.</p>
</div>
</div>
</section>
<section id="runtime-version-access">
<span id="id12"></span><h2>在运行时访问版本信息<a class="headerlink" href="#runtime-version-access" title="Link to this heading">¶</a></h2>
<p><strong>Accessing version information at runtime</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<p>可以使用标准库的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/importlib.metadata.html#importlib.metadata.version" title="（在 Python v3.13）"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.metadata.version()</span></code></a> 函数在运行时获取当前环境中所有 <a class="reference internal" href="../glossary.html#term-Distribution-Package"><span class="xref std std-term">分发包</span></a> 的版本信息：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="s2">&quot;cryptography&quot;</span><span class="p">)</span>
<span class="go">&#39;41.0.7&#39;</span>
</pre></div>
</div>
<p>许多项目还选择通过提供包级别的 <code class="docutils literal notranslate"><span class="pre">__version__</span></code> 属性来为其顶级 <a class="reference internal" href="../glossary.html#term-Import-Package"><span class="xref std std-term">导入包</span></a> 版本化：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cryptography</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cryptography</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;41.0.7&#39;</span>
</pre></div>
</div>
<p>这种技术对于希望确保版本查询调用（例如 <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">-V</span></code>）尽可能快速运行的 CLI 应用程序尤为有价值。</p>
<p>希望确保其报告的分发包和导入包版本相一致的包发布者可以查看 <a class="reference internal" href="single-source-version.html#single-source-version"><span class="std std-ref">单一来源项目版本</span></a> 讨论，以了解实现这一点的潜在方法。</p>
<p>由于导入包和模块并不是 <em>必须</em> 以这种方式发布运行时版本信息（请参见 <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0396/"><strong>PEP 396</strong></a> 中撤回的提案），因此 <code class="docutils literal notranslate"><span class="pre">__version__</span></code> 属性应仅通过已知提供该属性的接口进行查询（例如，项目查询其自身版本或其直接依赖项的版本），或者查询代码应设计为能够处理缺少该属性的情况  <a class="footnote-reference brackets" href="#fallback-to-dist-version1" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> 。</p>
<p>一些项目可能需要发布外部 API 的版本信息，而这些 API 并非模块本身的版本。这些项目应定义自己的特定项目方式来在运行时获取相关信息。例如，标准库的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/ssl.html#module-ssl" title="（在 Python v3.13）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> 模块提供了多种访问底层 OpenSSL 库版本的方式：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION</span>
<span class="go">&#39;OpenSSL 3.2.2 4 Jun 2024&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION_INFO</span>
<span class="go">(3, 2, 0, 2, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION_NUMBER</span><span class="p">)</span>
<span class="go">&#39;0x30200020&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<p>Version information for all <a class="reference internal" href="../glossary.html#term-Distribution-Package"><span class="xref std std-term">distribution packages</span></a>
that are locally available in the current environment can be obtained at runtime
using the standard library's <a class="reference external" href="https://docs.python.org/zh-cn/3/library/importlib.metadata.html#importlib.metadata.version" title="（在 Python v3.13）"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.metadata.version()</span></code></a> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="s2">&quot;cryptography&quot;</span><span class="p">)</span>
<span class="go">&#39;41.0.7&#39;</span>
</pre></div>
</div>
<p>Many projects also choose to version their top level
<a class="reference internal" href="../glossary.html#term-Import-Package"><span class="xref std std-term">import packages</span></a> by providing a package level
<code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cryptography</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cryptography</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;41.0.7&#39;</span>
</pre></div>
</div>
<p>This technique can be particularly valuable for CLI applications which want
to ensure that version query invocations (such as <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">-V</span></code>) run as quickly
as possible.</p>
<p>Package publishers wishing to ensure their reported distribution package and
import package versions are consistent with each other can review the
<a class="reference internal" href="single-source-version.html#single-source-version"><span class="std std-ref">单一来源项目版本</span></a> discussion for potential approaches to doing so.</p>
<p>As import packages and modules are not <em>required</em> to publish runtime
version information in this way (see the withdrawn proposal in
<span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0396/"><strong>PEP 396</strong></a>), the <code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute should either only be
queried with interfaces that are known to provide it (such as a project
querying its own version or the version of one of its direct dependencies),
or else the querying code should be designed to handle the case where the
attribute is missing <a class="footnote-reference brackets" href="#fallback-to-dist-version2" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>.</p>
<p>Some projects may need to publish version information for external APIs
that aren't the version of the module itself. Such projects should
define their own project-specific ways of obtaining the relevant information
at runtime. For example, the standard library's <a class="reference external" href="https://docs.python.org/zh-cn/3/library/ssl.html#module-ssl" title="（在 Python v3.13）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> module offers
multiple ways to access the underlying OpenSSL library version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION</span>
<span class="go">&#39;OpenSSL 3.2.2 4 Jun 2024&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION_INFO</span>
<span class="go">(3, 2, 0, 2, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="n">ssl</span><span class="o">.</span><span class="n">OPENSSL_VERSION_NUMBER</span><span class="p">)</span>
<span class="go">&#39;0x30200020&#39;</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="version-examples1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>Seth Larson 在 <a class="reference external" href="https://sethmlarson.dev/pep-440">博客文章</a> 中给出了更多不寻常版本号的示例。</p>
</aside>
<aside class="footnote brackets" id="version-examples2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Some more examples of unusual version numbers are given in a <a class="reference external" href="https://sethmlarson.dev/pep-440">blog post</a> by Seth Larson.</p>
</aside>
<aside class="footnote brackets" id="semver-strictness1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">3</a><span class="fn-bracket">]</span></span>
<p>关于此问题的一些个人观点，请参见以下博客文章：<a class="reference external" href="https://hynek.me/articles/semver-will-not-save-you/">由 Hynek Schlawak 撰写</a>，<a class="reference external" href="https://caremad.io/posts/2016/02/versioning-software/">由 Donald Stufft 撰写</a>，<a class="reference external" href="https://bernat.tech/posts/version-numbers/">由 Bernát Gábor 撰写</a>，<a class="reference external" href="https://snarky.ca/why-i-dont-like-semver/">由 Brett Cannon 撰写</a>。若想幽默地了解，请阅读关于 <a class="reference external" href="https://0ver.org">ZeroVer</a> 的文章。</p>
</aside>
<aside class="footnote brackets" id="semver-strictness2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">4</a><span class="fn-bracket">]</span></span>
<p>For some personal viewpoints on this issue, see these blog posts: <a class="reference external" href="https://hynek.me/articles/semver-will-not-save-you/">by Hynek Schlawak</a>, <a class="reference external" href="https://caremad.io/posts/2016/02/versioning-software/">by Donald Stufft</a>, <a class="reference external" href="https://bernat.tech/posts/version-numbers/">by Bernát Gábor</a>, <a class="reference external" href="https://snarky.ca/why-i-dont-like-semver/">by Brett Cannon</a>. For a humoristic take, read about <a class="reference external" href="https://0ver.org">ZeroVer</a>.</p>
</aside>
<aside class="footnote brackets" id="fallback-to-dist-version1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id13">5</a><span class="fn-bracket">]</span></span>
<p>A full list mapping the top level names available for import to the distribution packages that provide those import packages and modules may be obtained through the standard library's <a class="reference external" href="https://docs.python.org/zh-cn/3/library/importlib.metadata.html#importlib.metadata.packages_distributions" title="（在 Python v3.13）"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.metadata.packages_distributions()</span></code></a> function. This means that even code that is attempting to infer a version to report for all importable top-level names has a means to fall back to reporting the distribution version information if no <code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute is defined. Only standard library modules, and modules added via means other than Python package installation would fail to have version information reported in that case.</p>
</aside>
<aside class="footnote brackets" id="fallback-to-dist-version2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id14">6</a><span class="fn-bracket">]</span></span>
<p>通过标准库的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/importlib.metadata.html#importlib.metadata.packages_distributions" title="（在 Python v3.13）"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.metadata.packages_distributions()</span></code></a> 函数，可以获得将顶级名称映射到提供这些导入包和模块的分发包的完整列表。这意味着，即使是尝试推断所有可导入顶级名称的版本并进行报告的代码，也可以在没有定义 <code class="docutils literal notranslate"><span class="pre">__version__</span></code> 属性的情况下回退到报告分发版本信息。如果没有版本信息被报告的情况，仅有标准库模块和通过非 Python 包安装方式添加的模块会失败。</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="deploying-python-applications.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">部署 Python 应用程序</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">讨论</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2013–2020, PyPA
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2024 年 11 月 15 日</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">版本控制</a><ul>
<li><a class="reference internal" href="#id2">有效版本号</a></li>
<li><a class="reference internal" href="#id5">语义版本控制与日历版本控制</a><ul>
<li><a class="reference internal" href="#id6">语义版本控制</a></li>
<li><a class="reference internal" href="#id9">日历版本控制</a></li>
<li><a class="reference internal" href="#id10">其他方案</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">本地版本标识符</a></li>
<li><a class="reference internal" href="#runtime-version-access">在运行时访问版本信息</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=7d86a446"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=cb5fb026"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    </body>
</html>